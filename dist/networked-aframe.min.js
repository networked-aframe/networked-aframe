!function(u){function t(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return u[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var e={};return t.m=u,t.c=e,t.p="",t(0)}([function(u,t,e){"use strict";e(13),e(12),e(3),e(59),e(60),e(58),e(61)},function(u,t){"use strict";var e=Array.prototype.forEach,n=Object.create;u.exports=function(u){var t=n(null);return e.call(arguments,function(u){t[u]=!0}),t}},function(u,t){"use strict";u.exports=function(u){if(null==u)throw new TypeError("Cannot use null or undefined");return u}},function(u,t,e){"use strict";var n=e(53),o=e(54),r=e(52),i=e(57),D=e(56),s=e(55),a={};a.app="",a.room="",a.clientId="",a.options=n,a.utils=o,a.log=new r,a.schemas=new i,a.version="0.1.0";var c=new D,l=new s(c);a.connection=a.c=l,a.entities=a.e=c,u.exports=window.NAF=a},function(u,t,e){"use strict";u.exports=e(18)()?Array.from:e(19)},function(u,t){"use strict";var e=Array.prototype.forEach,n=Object.create,o=function(u,t){var e;for(e in u)t[e]=u[e]};u.exports=function(u){var t=n(null);return e.call(arguments,function(u){null!=u&&o(Object(u),t)}),t}},function(u,t,e){"use strict";u.exports=e(28)()?Object.assign:e(29)},function(u,t){"use strict";u.exports=function(u){return"function"==typeof u}},function(u,t){"use strict";u.exports=function(u){if("function"!=typeof u)throw new TypeError(u+" is not a function");return u}},function(u,t,e){"use strict";u.exports=e(33)()?String.prototype.contains:e(34)},function(u,t,e){"use strict";var n=e(4),o=e(1);u.exports=o.apply(null,n("\n\r\u2028\u2029"))},function(u,t,e){"use strict";function n(u,t){if(!(u instanceof t))throw new TypeError("Cannot call a class as a function")}function o(u,t){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?u:t}function r(u,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);u.prototype=Object.create(t&&t.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(u,t):u.__proto__=t)}var i=function(){function u(u,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,n.key,n)}}return function(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}}(),D=e(51),s=function(u){function t(){n(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.connectList={},u.dcIsActive={},u.networkEntities={},u}return r(t,u),i(t,[{key:"joinRoom",value:function(u){this.notImplemented()}},{key:"setStreamOptions",value:function(u){this.notImplemented()}},{key:"setDatachannelListeners",value:function(u,t,e){this.notImplemented()}},{key:"setRoomOccupantListener",value:function(u){this.notImplemented()}},{key:"setLoginListeners",value:function(u,t){this.notImplemented()}},{key:"connect",value:function(u){this.notImplemented()}},{key:"startStreamConnection",value:function(u){this.notImplemented()}},{key:"sendDataP2P",value:function(u,t,e){this.notImplemented()}},{key:"sendDataGuaranteed",value:function(u,t,e){this.notImplemented()}},{key:"getRoomJoinTime",value:function(u){this.notImplemented()}},{key:"getConnectStatus",value:function(u){this.notImplemented()}}]),t}(D);s.IS_CONNECTED="IS_CONNECTED",s.CONNECTING="CONNECTING",s.NOT_CONNECTED="NOT_CONNECTED",u.exports=s},function(u,t){"use strict";if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var e=THREE.Math.degToRad;AFRAME.registerComponent("lerp",{schema:{duration:{type:"int",default:100},properties:{default:["position","rotation","scale"]}},init:function(){this.lerpingPosition=!1,this.lerpingRotation=!1,this.lerpingScale=!1,this.el.addEventListener("componentchanged",this.changedListener.bind(this))},tick:function(u,t){var e,n=this.now(),o=this.el.object3D;this.lerpingPosition&&(e=(n-this.startLerpTimePosition)/this.data.duration,o.position.lerpVectors(this.startPosition,this.targetPosition,e),e>=1&&(this.lerpingPosition=!1)),this.lerpingRotation&&(e=(n-this.startLerpTimeRotation)/this.data.duration,THREE.Quaternion.slerp(this.startRotation,this.targetRotation,o.quaternion,e),e>=1&&(this.lerpingRotation=!1)),this.lerpingScale&&(e=(n-this.startLerpTimeScale)/this.data.duration,o.scale.lerpVectors(this.startScale,this.targetScale,e),e>=1&&(this.lerpingScale=!1))},changedListener:function(u){var t=u.detail.name,e=u.detail.oldData,n=u.detail.newData;this.data.properties.indexOf(t)!=-1&&("position"==t?this.toPosition(e,n):"rotation"==t?this.toRotation(e,n):"scale"==t&&this.toScale(e,n))},toPosition:function(u,t){this.lerpingPosition=!0,this.startLerpTimePosition=this.now(),this.startPosition=new THREE.Vector3(u.x,u.y,u.z),this.targetPosition=new THREE.Vector3(t.x,t.y,t.z)},toRotation:function(u,t){this.lerpingRotation=!0,this.startLerpTimeRotation=this.now(),this.startRotation=new THREE.Quaternion,this.startRotation.setFromEuler(new THREE.Euler(e(u.x),e(u.y),e(u.z),"YXZ")),this.targetRotation=new THREE.Quaternion,this.targetRotation.setFromEuler(new THREE.Euler(e(t.x),e(t.y),e(t.z),"YXZ"))},toScale:function(u,t){this.lerpingScale=!0,this.startLerpTimeScale=this.now(),this.startScale=new THREE.Vector3(u.x,u.y,u.z),this.targetScale=new THREE.Vector3(t.x,t.y,t.z)},now:function(){return Date.now()}})},function(u,t,e){"use strict";function n(u,t,e){return new Promise(function(n){l(t).then(function(){A[u]={template:D(t)(e.trim()),type:t},n(A[u])})})}function o(u,t,e){switch(t){case h:return u(e);case d:return u(e);case y:return Mustache.render(u,e);case m:return u.render(e);default:return console.log(u),console.log(e),C(u,e)}}function r(u,t){var e=document.querySelector(u),o=e.getAttribute("type"),r=e.innerHTML;if(!t){if(!o)throw new Error("Must provide `type` attribute for <script> templates (e.g., handlebars, jade, nunjucks, html)");if(o.indexOf("handlebars")!==-1)t=h;else if(o.indexOf("jade")!==-1)t=d;else if(o.indexOf("mustache")!==-1)t=y;else if(o.indexOf("nunjucks")!==-1)t=m;else{if(o.indexOf("html")===-1)return void E("Template type could not be inferred from the script tag. Please add a type.");t=B}}return new Promise(function(e){n(u,t,r).then(function(u){e(u,t)})})}function i(u,t){return new Promise(function(e){var o;o=new XMLHttpRequest,o.addEventListener("load",function(){n(u,t,o.response).then(function(u){e(u,t)})}),o.open("GET",u),o.send()})}function D(u){switch(u){case h:return s;case d:return a;case y:return s;case m:return c;default:return function(u){return u}}}function s(u){return Handlebars.compile(u)}function a(u){return jade.compile(u)}function c(u){return nunjucks.compile(u)}function l(u){return new Promise(function(t){if(!u||"html"===u)return t();var e=v[u];if(v[u]===!0)return t();e||(e=document.createElement("script"),v[u]=e,e.setAttribute("src",b[u]),p('Lazy-loading %s engine. Please add <script src="%s"> to your page.',u,b[u]),document.body.appendChild(e));var n=e.onload||function(){};e.onload=function(){n(),v[u]=!0,t()}})}var C=e(42),F=AFRAME.utils.debug,f=AFRAME.utils.extend,A={},E=F("template-component:error"),p=F("template-component:info"),h="handlebars",d="jade",y="mustache",m="nunjucks",B="html",v={};v[h]=!!window.Handlebars,v[d]=!!window.jade,v[y]=!!window.Mustache,v[m]=!!window.nunjucks;var b={};b[h]="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js",b[d]="https://cdnjs.cloudflare.com/ajax/libs/jade/1.11.0/jade.min.js",b[y]="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.2.1/mustache.min.js",b[m]="https://cdnjs.cloudflare.com/ajax/libs/nunjucks/2.3.0/nunjucks.min.js",AFRAME.registerComponent("template",{schema:{insert:{default:"beforeend"},type:{default:""},src:{default:""},data:{default:""}},update:function(u){var t=this.data,e=this.el,n="#"===t.src[0]?r:i,o=A[t.src];if(u&&u.src!==t.src)for(;e.firstChild;)e.removeChild(e.firstChild);return o?void this.renderTemplate(o):void n(t.src,t.type).then(this.renderTemplate.bind(this))},renderTemplate:function(u){var t=this.el,e=this.data,n={};Object.keys(t.dataset).forEach(function(u){n[u]=t.dataset[u]}),e.data&&(n=f(n,t.getComputedAttribute(e.data)));var r=o(u.template,u.type,n);t.insertAdjacentHTML(e.insert,r)}}),AFRAME.registerComponent("template-set",{schema:{on:{type:"string"},src:{type:"string"},data:{type:"string"}},init:function(){var u=this.data,t=this.el;t.addEventListener(u.on,function(){t.setAttribute("template",{src:u.src,data:u.data})})}})},function(u,t,e){"use strict";var n,o=e(6),r=e(5),i=e(7),D=e(9);n=u.exports=function(u,t){var e,n,i,s,a;return arguments.length<2||"string"!=typeof u?(s=t,t=u,u=null):s=arguments[2],null==u?(e=i=!0,n=!1):(e=D.call(u,"c"),n=D.call(u,"e"),i=D.call(u,"w")),a={value:t,configurable:e,enumerable:n,writable:i},s?o(r(s),a):a},n.gs=function(u,t,e){var n,s,a,c;return"string"!=typeof u?(a=e,e=t,t=u,u=null):a=arguments[3],null==t?t=void 0:i(t)?null==e?e=void 0:i(e)||(a=e,e=void 0):(a=t,t=e=void 0),null==u?(n=!0,s=!1):(n=D.call(u,"c"),s=D.call(u,"e")),c={get:t,set:e,configurable:n,enumerable:s},a?o(r(a),c):c}},function(u,t,e){"use strict";function n(u){return null===u||void 0===u}function o(u){return!(!u||"object"!==("undefined"==typeof u?"undefined":i(u))||"number"!=typeof u.length)&&("function"==typeof u.copy&&"function"==typeof u.slice&&!(u.length>0&&"number"!=typeof u[0]))}function r(u,t,e){var r,l;if(n(u)||n(t))return!1;if(u.prototype!==t.prototype)return!1;if(a(u))return!!a(t)&&(u=D.call(u),t=D.call(t),c(u,t,e));if(o(u)){if(!o(t))return!1;if(u.length!==t.length)return!1;for(r=0;r<u.length;r++)if(u[r]!==t[r])return!1;return!0}try{var C=s(u),F=s(t)}catch(u){return!1}if(C.length!=F.length)return!1;for(C.sort(),F.sort(),r=C.length-1;r>=0;r--)if(C[r]!=F[r])return!1;for(r=C.length-1;r>=0;r--)if(l=C[r],!c(u[l],t[l],e))return!1;return("undefined"==typeof u?"undefined":i(u))===("undefined"==typeof t?"undefined":i(t))}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},D=Array.prototype.slice,s=e(17),a=e(16),c=u.exports=function(u,t,e){return e||(e={}),u===t||(u instanceof Date&&t instanceof Date?u.getTime()===t.getTime():!u||!t||"object"!=("undefined"==typeof u?"undefined":i(u))&&"object"!=("undefined"==typeof t?"undefined":i(t))?e.strict?u===t:u==t:r(u,t,e))}},function(u,t){"use strict";function e(u){return"[object Arguments]"==Object.prototype.toString.call(u)}function n(u){return u&&"object"==("undefined"==typeof u?"undefined":o(u))&&"number"==typeof u.length&&Object.prototype.hasOwnProperty.call(u,"callee")&&!Object.prototype.propertyIsEnumerable.call(u,"callee")||!1}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();t=u.exports=r?e:n,t.supported=e,t.unsupported=n},function(u,t){"use strict";function e(u){var t=[];for(var e in u)t.push(e);return t}t=u.exports="function"==typeof Object.keys?Object.keys:e,t.shim=e},function(u,t){"use strict";u.exports=function(){var u,t,e=Array.from;return"function"==typeof e&&(u=["raz","dwa"],t=e(u),Boolean(t&&t!==u&&"dwa"===t[1]))}},function(u,t,e){"use strict";var n=e(36).iterator,o=e(20),r=e(21),i=e(27),D=e(8),s=e(2),a=e(35),c=Array.isArray,l=Function.prototype.call,C={configurable:!0,enumerable:!0,writable:!0,value:null},F=Object.defineProperty;u.exports=function(u){var t,e,f,A,E,p,h,d,y,m,B=arguments[1],v=arguments[2];if(u=Object(s(u)),null!=B&&D(B),this&&this!==Array&&r(this))t=this;else{if(!B){if(o(u))return E=u.length,1!==E?Array.apply(null,u):(A=new Array(1),A[0]=u[0],A);if(c(u)){for(A=new Array(E=u.length),e=0;e<E;++e)A[e]=u[e];return A}}A=[]}if(!c(u))if(void 0!==(y=u[n])){for(h=D(y).call(u),t&&(A=new t),d=h.next(),e=0;!d.done;)m=B?l.call(B,v,d.value,e):d.value,t?(C.value=m,F(A,e,C)):A[e]=m,d=h.next(),++e;E=e}else if(a(u)){for(E=u.length,t&&(A=new t),e=0,f=0;e<E;++e)m=u[e],e+1<E&&(p=m.charCodeAt(0),p>=55296&&p<=56319&&(m+=u[++e])),m=B?l.call(B,v,m,f):m,t?(C.value=m,F(A,f,C)):A[f]=m,++f;E=f}if(void 0===E)for(E=i(u.length),t&&(A=new t(E)),e=0;e<E;++e)m=B?l.call(B,v,u[e],e):u[e],t?(C.value=m,F(A,e,C)):A[e]=m;return t&&(C.value=null,A.length=E),A}},function(u,t){"use strict";var e=Object.prototype.toString,n=e.call(function(){return arguments}());u.exports=function(u){return e.call(u)===n}},function(u,t,e){"use strict";var n=Object.prototype.toString,o=n.call(e(22));u.exports=function(u){return"function"==typeof u&&n.call(u)===o}},function(u,t){"use strict";u.exports=function(){}},function(u,t,e){"use strict";u.exports=e(24)()?Math.sign:e(25)},function(u,t){"use strict";u.exports=function(){var u=Math.sign;return"function"==typeof u&&(1===u(10)&&u(-20)===-1)}},function(u,t){"use strict";u.exports=function(u){return u=Number(u),isNaN(u)||0===u?u:u>0?1:-1}},function(u,t,e){"use strict";var n=e(23),o=Math.abs,r=Math.floor;u.exports=function(u){return isNaN(u)?0:(u=Number(u),0!==u&&isFinite(u)?n(u)*r(o(u)):u)}},function(u,t,e){"use strict";var n=e(26),o=Math.max;u.exports=function(u){return o(0,n(u))}},function(u,t){"use strict";u.exports=function(){var u,t=Object.assign;return"function"==typeof t&&(u={foo:"raz"},t(u,{bar:"dwa"},{trzy:"trzy"}),u.foo+u.bar+u.trzy==="razdwatrzy")}},function(u,t,e){"use strict";var n=e(30),o=e(2),r=Math.max;u.exports=function(u,t){var e,i,D,s=r(arguments.length,2);for(u=Object(o(u)),D=function(n){try{u[n]=t[n]}catch(u){e||(e=u)}},i=1;i<s;++i)t=arguments[i],n(t).forEach(D);if(void 0!==e)throw e;return u}},function(u,t,e){"use strict";u.exports=e(31)()?Object.keys:e(32)},function(u,t){"use strict";u.exports=function(){try{return Object.keys("primitive"),!0}catch(u){return!1}}},function(u,t){"use strict";var e=Object.keys;u.exports=function(u){return e(null==u?u:Object(u))}},function(u,t){"use strict";var e="razdwatrzy";u.exports=function(){return"function"==typeof e.contains&&(e.contains("dwa")===!0&&e.contains("foo")===!1)}},function(u,t){"use strict";var e=String.prototype.indexOf;u.exports=function(u){return e.call(this,u,arguments[1])>-1}},function(u,t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},n=Object.prototype.toString,o=n.call("");u.exports=function(u){return"string"==typeof u||u&&"object"===("undefined"==typeof u?"undefined":e(u))&&(u instanceof String||n.call(u)===o)||!1}},function(u,t,e){"use strict";u.exports=e(37)()?Symbol:e(39)},function(u,t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},n={object:!0,symbol:!0};u.exports=function(){var u;if("function"!=typeof Symbol)return!1;u=Symbol("test symbol");try{String(u)}catch(u){return!1}return!!n[e(Symbol.iterator)]&&(!!n[e(Symbol.toPrimitive)]&&!!n[e(Symbol.toStringTag)])}},function(u,t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u};u.exports=function(u){return!!u&&("symbol"===("undefined"==typeof u?"undefined":e(u))||!!u.constructor&&("Symbol"===u.constructor.name&&"Symbol"===u[u.constructor.toStringTag]))}},function(u,t,e){"use strict";var n,o,r,i,D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(u){return typeof u}:function(u){return u&&"function"==typeof Symbol&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},s=e(14),a=e(40),c=Object.create,l=Object.defineProperties,C=Object.defineProperty,F=Object.prototype,f=c(null);if("function"==typeof Symbol){n=Symbol;try{String(n()),i=!0}catch(u){}}var A=function(){var u=c(null);return function(t){for(var e,n,o=0;u[t+(o||"")];)++o;return t+=o||"",u[t]=!0,e="@@"+t,C(F,e,s.gs(null,function(u){n||(n=!0,C(this,e,s(u)),n=!1)})),e}}();r=function(u){if(this instanceof r)throw new TypeError("TypeError: Symbol is not a constructor");return o(u)},u.exports=o=function u(t){var e;if(this instanceof u)throw new TypeError("TypeError: Symbol is not a constructor");return i?n(t):(e=c(r.prototype),t=void 0===t?"":String(t),l(e,{__description__:s("",t),__name__:s("",A(t))}))},l(o,{for:s(function(u){return f[u]?f[u]:f[u]=o(String(u))}),keyFor:s(function(u){var t;a(u);for(t in f)if(f[t]===u)return t}),hasInstance:s("",n&&n.hasInstance||o("hasInstance")),isConcatSpreadable:s("",n&&n.isConcatSpreadable||o("isConcatSpreadable")),iterator:s("",n&&n.iterator||o("iterator")),match:s("",n&&n.match||o("match")),replace:s("",n&&n.replace||o("replace")),search:s("",n&&n.search||o("search")),species:s("",n&&n.species||o("species")),split:s("",n&&n.split||o("split")),toPrimitive:s("",n&&n.toPrimitive||o("toPrimitive")),toStringTag:s("",n&&n.toStringTag||o("toStringTag")),unscopables:s("",n&&n.unscopables||o("unscopables"))}),l(r.prototype,{constructor:s(o),toString:s("",function(){return this.__name__})}),l(o.prototype,{toString:s(function(){return"Symbol ("+a(this).__description__+")"}),valueOf:s(function(){return a(this)})}),C(o.prototype,o.toPrimitive,s("",function(){var u=a(this);return"symbol"===("undefined"==typeof u?"undefined":D(u))?u:u.toString()})),C(o.prototype,o.toStringTag,s("c","Symbol")),C(r.prototype,o.toStringTag,s("c",o.prototype[o.toStringTag])),C(r.prototype,o.toPrimitive,s("c",o.prototype[o.toPrimitive]))},function(u,t,e){"use strict";var n=e(38);u.exports=function(u){if(!n(u))throw new TypeError(u+" is not a symbol");return u}},function(u,t,e){"use strict";var n,o,r,i,D,s,a,c,l,C,F=e(46);D=function(u){return"\\"===u?s:"$"===u?a:(o+=u,D)},s=function(u){return"\\"!==u&&"$"!==u&&(o+="\\"),o+=u,D},a=function(u){return"{"===u?(r.push(o),o="",c):"$"===u?(o+="$",a):(o+="$"+u,D)},c=function(u){var t,e=C.slice(n);return F(e,"}",function(u){return F.nest>=0?F.next():void(t=u)}),null!=t?(i.push(C.slice(n,n+t)),n+=t,o="",D):(t=e.length,n+=t,o+=e,c)},l=function(u){return"\\"!==u&&"}"!==u&&(o+="\\"),o+=u,c},u.exports=function(u){var t,e,F;for(o="",r=[],i=[],C=String(u),t=C.length,e=D,n=0;n<t;++n)e=e(C[n]);return e===D?r.push(o):e===s?r.push(o+"\\"):e===a?r.push(o+"$"):e===c?r[r.length-1]+="${"+o:e===l&&(r[r.length-1]+="${"+o+"\\"),F={literals:r,substitutions:i},r=i=null,F}},function(u,t,e){"use strict";var n=e(41),o=e(44);u.exports=function(u,t){return o(n(u),t,arguments[2])}},function(u,t){"use strict";var e=Array.prototype.reduce;u.exports=function(u){var t=arguments;return e.call(u,function(u,e,n){return u+(void 0===t[n]?"":String(t[n]))+e})}},function(u,t,e){"use strict";var n=e(45),o=e(43);u.exports=function(u,t){return o.apply(null,n(u,t,arguments[2]))}},function(u,t,e){"use strict";var n=e(2),o=e(5),r=e(47),i=Array.prototype.map,D=Object.keys,s=JSON.stringify;u.exports=function(u,t){var e,a,c,l=Object(arguments[2]);return n(u)&&n(u.literals)&&n(u.substitutions),t=o(t),e=D(t).filter(r),a=e.join(", "),c=e.map(function(u){return t[u]}),[u.literals].concat(i.call(u.substitutions,function(u){var t;if(u){try{t=new Function(a,"return ("+u+")")}catch(t){throw new TypeError("Unable to compile expression:\n\targs: "+s(a)+"\n\tbody: "+s(u)+"\n\terror: "+t.stack)}try{return t.apply(null,c)}catch(t){if(l.partial)return"${"+u+"}";throw new TypeError("Unable to resolve expression:\n\targs: "+s(a)+"\n\tbody: "+s(u)+"\n\terror: "+t.stack)}}}))}},function(u,t,e){"use strict";var n,o,r,i,D,s,a,c,l,C,F,f,A,E,p,h,d,y,m,B,v,b,g,w,S,k,x,T=e(4),O=e(1),j=e(2),N=e(8),P=e(50),R=e(10),L=e(49),I=Object.prototype.hasOwnProperty,_=O.apply(null,T(";{=([,<>+-*/%&|^!~?:}")),M=O.apply(null,T(";{=([,<>+-*/%&|^!~?:})]."));n=function(u){if(f&&!(F>=u))for(;F!==u;){if(!f)return;I.call(L,f)?I.call(R,f)&&(E=F,++A):h=f,f=B[++F]}},o=function(u){null!=S&&y.push([k,S,u]),k={point:F+1,line:A,column:F+1-E},S=F},r=function(){var u;return k.raw=B.slice(S,F),m.push(k),y.length?(u=y.pop(),k=u[0],S=u[1],void(x=u[2])):(k=null,S=null,void(x=null))},i=function(){var u=x;return x=d,++d,n(F+1),o(u),D},s=function(){if("'"===f||'"'===f)return w=f,f=B[++F],a;if("("===f||"{"===f||"["===f)++d;else if(")"===f||"}"===f||"]"===f)x===--d&&r();else if("/"===f&&I.call(_,h))return f=B[++F],C;return f!==v||!b&&h&&!p&&!I.call(M,h)?(h=f,f=B[++F],D):g(F,h,d)},c=function(){for(;;){if(!f)return;if(I.call(R,f))return E=F+1,void++A;f=B[++F]}},l=function(){for(;;){if(!f)return;if("*"!==f)I.call(R,f)&&(E=F+1,++A),f=B[++F];else if(f=B[++F],"/"===f)return}},D=function(){var u;for(p=!1;;){if(!f)return;if(I.call(L,f))p=!0,I.call(R,f)&&(E=F+1,++A);else{if("/"!==f)break;if(u=B[F+1],"/"===u)f=B[F+=2],p=!0,c();else{if("*"!==u)break;f=B[F+=2],p=!0,l()}}f=B[++F]}return s},a=function(){for(;;){if(!f)return;if(f===w)return f=B[++F],h=w,D;"\\"===f&&I.call(R,B[++F])&&(E=F+1,++A),f=B[++F]}},C=function(){for(;;){if(!f)return;if("/"===f)return h="/",f=B[++F],D;"\\"===f&&++F,f=B[++F]}},u.exports=t=function(u){function t(t,e,n){return u.apply(this,arguments)}return t.toString=function(){return u.toString()},t}(function(u,e,n){var o;if(B=String(j(u)),v=String(j(e)),1!==v.length)throw new TypeError(v+" should be one character long string");for(g=N(n),b=I.call(M,v),F=0,f=B[F],A=1,E=0,p=!1,h=null,d=0,y=[],m=[],t.forceStop=!1,o=D;o;)o=o();return m}),Object.defineProperties(t,{$ws:P(D),$common:P(s),collectNest:P(i),move:P(n),index:P.gs(function(){return F}),line:P.gs(function(){return A}),nest:P.gs(function(){return d}),columnIndex:P.gs(function(){return E}),next:P(function(u){if(f)return n(F+(u||1)),D()}),resume:P(function(){return s})})},function(u,t){"use strict";u.exports=RegExp.prototype.test.bind(/^(?!(?:do|if|in|for|let|new|try|var|case|else|enum|eval|null|this|true|void|with|await|break|catch|class|const|false|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$)(?:[\$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D])(?:[\$0-9A-Z_a-z\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF])*$/);
},function(u,t,e){"use strict";var n=e(4),o=e(1);u.exports=o.apply(null,n(" \f\t\v​  ​᠎ ​  ​  ​  ​  ​  ​​​  ​　"))},function(u,t,e){"use strict";var n=e(1),o=e(10),r=e(48);u.exports=n.apply(null,Object.keys(o).concat(Object.keys(r)))},function(u,t,e){"use strict";var n,o=e(6),r=e(5),i=e(7),D=e(9);n=u.exports=function(u,t){var e,n,i,s,a;return arguments.length<2||"string"!=typeof u?(s=t,t=u,u=null):s=arguments[2],null==u?(e=i=!0,n=!1):(e=D.call(u,"c"),n=D.call(u,"e"),i=D.call(u,"w")),a={value:t,configurable:e,enumerable:n,writable:i},s?o(r(s),a):a},n.gs=function(u,t,e){var n,s,a,c;return"string"!=typeof u?(a=e,e=t,t=u,u=null):a=arguments[3],null==t?t=void 0:i(t)?null==e?e=void 0:i(e)||(a=e,e=void 0):(a=t,t=e=void 0),null==u?(n=!0,s=!1):(n=D.call(u,"c"),s=D.call(u,"e")),c={get:t,set:e,configurable:n,enumerable:s},a?o(r(a),c):c}},function(u,t){"use strict";function e(u,t){if(!(u instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function u(u,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,n.key,n)}}return function(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}}(),o=function(){function u(){e(this,u)}return n(u,[{key:"notImplemented",value:function(){console.error("Interface method not implemented.")}}]),u}();u.exports=o},function(u,t){"use strict";function e(u,t){if(!(u instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function u(u,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,n.key,n)}}return function(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}}(),o=function(){function u(){e(this,u),this.debug=!1}return n(u,[{key:"setDebug",value:function(u){this.debug=u}},{key:"write",value:function(){this.debug&&console.log.apply(this,arguments)}},{key:"error",value:function(){console.error.apply(this,arguments)}}]),u}();u.exports=o},function(u,t){"use strict";var e={debug:!1,updateRate:15,compressSyncPackets:!1,useLerp:!0};u.exports=e},function(u,t){"use strict";u.exports.whenEntityLoaded=function(u,t){u.hasLoaded&&t(),u.addEventListener("loaded",function(){t()})},u.exports.createHtmlNodeFromString=function(u){var t=document.createElement("div");t.innerHTML=u;var e=t.firstChild;return e},u.exports.getNetworkOwner=function(u){return u.components.hasOwnProperty("network")?u.components.network.data.owner:null},u.exports.now=function(){return Date.now()},u.exports.delimiter="|||"},function(u,t,e){"use strict";function n(u,t){if(!(u instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function u(u,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,n.key,n)}}return function(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}}(),r=e(11),i=function(){function u(t){n(this,u),this.entities=t,this.setupDefaultDCSubs(),this.myRoomJoinTime=0,this.connectList={},this.dcIsActive={},this.loggedIn=!1,this.onLoggedInEvent=new Event("loggedIn")}return o(u,[{key:"setWebRtc",value:function(u){this.webrtc=u}},{key:"setupDefaultDCSubs",value:function(){this.dcSubscribers={u:this.entities.updateEntity.bind(this.entities),r:this.entities.removeRemoteEntity.bind(this.entities)}}},{key:"connect",value:function(u,t){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];NAF.app=u,NAF.room=t;var n={audio:e,video:!1,datachannel:!0};this.webrtc.setStreamOptions(n),this.webrtc.setDatachannelListeners(this.dcOpenListener.bind(this),this.dcCloseListener.bind(this),this.receiveDataChannelMessage.bind(this)),this.webrtc.setLoginListeners(this.loginSuccess.bind(this),this.loginFailure.bind(this)),this.webrtc.setRoomOccupantListener(this.occupantsReceived.bind(this)),this.webrtc.joinRoom(t),this.webrtc.connect(u)}},{key:"onLogin",value:function(u){this.loggedIn?u():document.body.addEventListener("loggedIn",u,!1)}},{key:"loginSuccess",value:function(u){NAF.log.write("Networked-Aframe Client ID:",u),NAF.clientId=u,this.myRoomJoinTime=this.webrtc.getRoomJoinTime(u),this.loggedIn=!0,document.body.dispatchEvent(this.onLoggedInEvent)}},{key:"loginFailure",value:function(u,t){NAF.log.error(u,"failure to login"),this.loggedIn=!1}},{key:"occupantsReceived",value:function(u,t,e){this.connectList=t;for(var n in this.connectList)this.isNewClient(n)&&this.myClientShouldStartConnection(n)&&this.webrtc.startStreamConnection(n)}},{key:"isConnected",value:function(){return this.loggedIn}},{key:"isMineAndConnected",value:function(u){return NAF.clientId==u}},{key:"isNewClient",value:function(u){return!this.isConnectedTo(u)}},{key:"isConnectedTo",value:function(u){return this.webrtc.getConnectStatus(u)===r.IS_CONNECTED}},{key:"myClientShouldStartConnection",value:function(u){var t=this.connectList[u].roomJoinTime;return this.myRoomJoinTime<=t}},{key:"dcOpenListener",value:function(u){NAF.log.write("Opened data channel from "+u),this.dcIsActive[u]=!0,this.entities.completeSync()}},{key:"dcCloseListener",value:function(u){NAF.log.write("Closed data channel from "+u),this.dcIsActive[u]=!1,this.entities.removeEntitiesFromUser(u)}},{key:"dcIsConnectedTo",value:function(u){return this.dcIsActive.hasOwnProperty(u)&&this.dcIsActive[u]}},{key:"broadcastData",value:function(u,t,e){for(var n in this.connectList)this.sendData(n,u,t,e)}},{key:"broadcastDataGuaranteed",value:function(u,t){this.broadcastData(u,t,!0)}},{key:"sendData",value:function(u,t,e,n){this.dcIsConnectedTo(u)&&(n?this.webrtc.sendDataGuaranteed(u,t,e):this.webrtc.sendDataP2P(u,t,e))}},{key:"sendDataGuaranteed",value:function(u,t,e){this.sendData(u,t,e,!0)}},{key:"subscribeToDataChannel",value:function(u,t){return"u"==u||"r"==u?void NAF.log.error("NetworkConnection@subscribeToDataChannel: "+u+" is a reserved dataType. Choose another"):void(this.dcSubscribers[u]=t)}},{key:"unsubscribeFromDataChannel",value:function(u){return"u"==u||"r"==u?void NAF.log.error("NetworkConnection@unsubscribeFromDataChannel: "+u+" is a reserved dataType. Choose another"):void delete this.dcSubscribers[u]}},{key:"receiveDataChannelMessage",value:function(u,t,e){this.dcSubscribers.hasOwnProperty(t)?this.dcSubscribers[t](u,t,e):NAF.log.error("NetworkConnection@receiveDataChannelMessage: "+t+" has not been subscribed to yet. Call subscribeToDataChannel()")}}]),u}();u.exports=i},function(u,t){"use strict";function e(u,t){if(!(u instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function u(u,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,n.key,n)}}return function(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}}(),o=function(){function u(){e(this,u),this.entities={}}return n(u,[{key:"createNetworkEntity",value:function(u,t,e){var n=this.createEntityId();NAF.log.write("Created network entity",n);var o={networkId:n,owner:NAF.clientId,template:u,components:{position:t,rotation:e}},r=this.createLocalEntity(o);return r}},{key:"createAvatar",value:function(u,t,e){var n=this.createNetworkEntity(u,t,e);n.setAttribute("visible",!1),n.setAttribute("follow-entity","[camera]"),n.className+=" local-avatar",n.removeAttribute("lerp");var o=document.querySelector("[camera]");return o.setAttribute("position",t),o.setAttribute("rotation",e),n}},{key:"createLocalEntity",value:function(u){var t=document.createElement("a-entity");t.setAttribute("id","naf-"+u.networkId),NAF.options.useLerp&&t.setAttribute("lerp","");var e=u.template;this.setTemplate(t,e);var n=this.getComponents(e);this.initPosition(t,u.components),this.initRotation(t,u.components),this.setNetworkData(t,u,n),t.initNafData=u;var o=document.querySelector("a-scene");return o.appendChild(t),this.entities[u.networkId]=t,t}},{key:"setTemplate",value:function(u,t){var e=document.querySelector(t);e?u.setAttribute("template","src:"+t):NAF.log.error("NetworkEntities@createLocalEntity: Template not found: "+t)}},{key:"getComponents",value:function(u){var t=["position","rotation"];return NAF.schemas.hasTemplate(u)&&(t=NAF.schemas.getComponents(u)),t}},{key:"initPosition",value:function(u,t){var e=t.hasOwnProperty("position");if(e){var n=t.position;u.setAttribute("position",n)}}},{key:"initRotation",value:function(u,t){var e=t.hasOwnProperty("rotation");if(e){var n=t.rotation;u.setAttribute("rotation",n)}}},{key:"setNetworkData",value:function(u,t,e){var n={owner:t.owner,networkId:t.networkId,components:e};u.setAttribute("network",n)}},{key:"updateEntity",value:function(u,t,e){var n=1==e[0],o=n?e[1]:e.networkId;this.hasEntity(o)?this.entities[o].emit("networkUpdate",{entityData:e},!1):n||(NAF.log.write("Creating remote entity",e),this.createLocalEntity(e))}},{key:"completeSync",value:function(){for(var u in this.entities)this.entities.hasOwnProperty(u)&&this.entities[u].emit("syncAll",null,!1)}},{key:"removeRemoteEntity",value:function(u,t,e){var n=e.networkId;return this.removeEntity(n)}},{key:"removeEntity",value:function(u){if(this.hasEntity(u)){var t=this.entities[u];return delete this.entities[u],t.parentNode.removeChild(t),t}return null}},{key:"removeEntitiesFromUser",value:function(u){var t=[];for(var e in this.entities){var n=NAF.utils.getNetworkOwner(this.entities[e]);if(n==u){var o=this.removeEntity(e);t.push(o)}}return t}},{key:"getEntity",value:function(u){return this.entities.hasOwnProperty(u)?this.entities[u]:null}},{key:"hasEntity",value:function(u){return this.entities.hasOwnProperty(u)}},{key:"createEntityId",value:function(){return Math.random().toString(36).substring(2,9)}}]),u}();u.exports=o},function(u,t){"use strict";function e(u,t){if(!(u instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function u(u,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,n.key,n)}}return function(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}}(),o=function(){function u(){e(this,u),this.dict={}}return n(u,[{key:"add",value:function(u){this.validate(u)?this.dict[u.template]=u:(NAF.log.error("Schema not valid: ",u),NAF.log.error("See https://github.com/haydenjameslee/networked-aframe#syncing-custom-components"))}},{key:"hasTemplate",value:function(u){return this.dict.hasOwnProperty(u)}},{key:"getComponents",value:function(u){return this.hasTemplate(u)?this.dict[u].components:(NAF.log.error("Schema with template "+u+" has not been added to naf.schemas yet"),null)}},{key:"validate",value:function(u){return u.hasOwnProperty("template")&&u.hasOwnProperty("components")}},{key:"remove",value:function(u){delete this.dict[u]}},{key:"clear",value:function(){this.dict={}}}]),u}();u.exports=o},function(u,t){"use strict";AFRAME.registerComponent("follow-entity",{schema:{type:"string"},entityToFollow:{},init:function(){""===this.data&&console.error("follow-entity selector must not be empty the string"),this.findEntity()},tick:function(){if(this.entityToFollow){var u=this.entityToFollow.getAttribute("position"),t=this.entityToFollow.getAttribute("rotation");this.el.setAttribute("position",u),this.el.setAttribute("rotation",t)}else this.findEntity()},findEntity:function(){this.entityToFollow=document.querySelector(this.data)}})},function(u,t,e){"use strict";var n=e(3),o=e(62);AFRAME.registerComponent("network-scene",{schema:{app:{default:"default"},room:{default:"default"},connectOnLoad:{default:!0},signalURL:{default:"/"},audio:{default:!1},debug:{default:!1},onConnect:{default:"onConnect"},signallingUrl:{default:"deprecated"}},init:function(){this.el.addEventListener("connect",this.connect.bind(this)),this.data.connectOnLoad&&this.el.emit("connect",null,!1)},connect:function(){n.log.setDebug(this.data.debug),n.log.write("Networked-Aframe Connecting..."),this.checkDeprecatedProperties();var u=new o(easyrtc,this.data.signalURL);n.connection.setWebRtc(u),""!=this.data.onConnect&&window.hasOwnProperty(this.data.onConnect)&&n.connection.onLogin(window[this.data.onConnect]),n.connection.connect(this.data.app,this.data.room,this.data.audio)},checkDeprecatedProperties:function(){"deprecated"!=this.data.signallingUrl&&n.log.error("network-scene `signallingUrl` has been replaced with `signalURL` (uppercase URL)")}})},function(u,t,e){"use strict";var n=e(3),o=e(15);AFRAME.registerComponent("network",{schema:{networkId:{type:"string"},owner:{type:"string"},components:{default:["position","rotation"]}},init:function(){this.nextSyncTime=n.utils.now()+1e5,this.cachedData={},this.el.initNafData&&(this.networkUpdateNaked(this.el.initNafData),this.waitForTemplateAndUpdateChildren()),this.isMine()&&this.waitForLoadThenFirstSync()},waitForTemplateAndUpdateChildren:function(){var u=this,t=function(){u.networkUpdateNaked(u.el.initNafData)};setTimeout(t,50)},waitForLoadThenFirstSync:function(){var u=this,t=function(){u.syncAll()};setTimeout(t,100)},update:function(u){this.bindEvents()},bindEvents:function(){this.isMine()?(this.el.addEventListener("sync",this.syncDirty.bind(this)),this.el.addEventListener("syncAll",this.syncAll.bind(this))):(this.el.removeEventListener("sync",this.syncDirty),this.el.removeEventListener("syncAll",this.syncAll)),this.el.addEventListener("networkUpdate",this.networkUpdate.bind(this))},tick:function(){this.isMine()&&this.needsToSync()&&this.syncDirty()},needsToSync:function(){return n.utils.now()>=this.nextSyncTime},isMine:function(){return this.hasOwnProperty("data")&&n.connection.isMineAndConnected(this.data.owner)},syncAll:function(){this.updateNextSyncTime();var u=this.getComponentsData(this.data.components),t=this.createSyncData(u);n.connection.broadcastDataGuaranteed("u",t),this.updateCache(u)},syncDirty:function(){this.updateNextSyncTime();var u=this.getDirtyComponents();if(0!=u.length){var t=this.getComponentsData(u),e=this.createSyncData(t);n.options.compressSyncPackets&&(e=this.compressSyncData(e)),n.connection.broadcastData("u",e),this.updateCache(t)}},getDirtyComponents:function(){var u=this.el.components,t=this.data.components,e=[];for(var n in t){var r=t[n];if(u.hasOwnProperty(r))if(this.cachedData.hasOwnProperty(r)){var i=this.cachedData[r],D=u[r].getData();o(i,D)||e.push(r)}else e.push(r)}return e},createSyncData:function(u){var t={0:0,networkId:this.data.networkId,owner:this.data.owner,template:"",components:u};return this.hasTemplate()&&(t.template=this.el.components.template.data.src),t},compressSyncData:function(u){var t=[];t.push(1),t.push(u.networkId),t.push(u.owner),t.push(u.template);var e=this.compressComponents(u.components);return t.push(e),t},compressComponents:function(u){for(var t={},e=this.data.components,n=0;n<e.length;n++){var o;o="string"==typeof e[n]?e[n]:this.childSchemaToKey(e[n]),u.hasOwnProperty(o)&&(t[n]=u[o])}return t},decompressSyncData:function(u){var t={};t[0]=1,t.networkId=u[1],t.owner=u[2],t.template=u[3];var e=u[4],n=this.decompressComponents(e);return t.components=n,t},decompressComponents:function(u){var t={},e=this.data.components;for(var n in u){var o,r=e[n];o="string"==typeof r?r:this.childSchemaToKey(r),t[o]=u[n]}return t},getComponentsData:function(u){var t=this.el.components,e={};for(var o in u){var r=u[o];if("string"==typeof r){if(t.hasOwnProperty(r)){var i=r,D=t[i];e[i]=D.getData()}}else{var s=this.childSchemaToKey(r),a=this.el.querySelector(r.selector);if(a){var c=a.components[r.component];if(c){var l=c.getData();e[s]=l}else n.log.write("Could not find component "+r.component+" on child ",a,a.components)}}}return e},updateCache:function(u){for(var t in u)this.cachedData[t]=u[t]},hasTemplate:function(){return this.el.components.hasOwnProperty("template")},updateNextSyncTime:function(){this.nextSyncTime=n.utils.now()+1e3/n.options.updateRate},networkUpdate:function(u){var t=u.detail.entityData;this.networkUpdateNaked(t)},networkUpdateNaked:function(u){1==u[0]&&(u=this.decompressSyncData(u));var t=this.el;""!=u.template&&t.setAttribute("template","src:"+u.template),this.updateComponents(u.components)},updateComponents:function(u){for(var t in u)if(this.isSyncableComponent(t)){var e=u[t];if(this.isChildSchemaKey(t)){var n=this.keyToChildSchema(t),o=this.el.querySelector(n.selector);o&&o.setAttribute(n.component,e)}else this.el.setAttribute(t,e)}},isSyncableComponent:function(u){if(this.isChildSchemaKey(u)){var t=this.keyToChildSchema(u);return this.hasChildSchema(t)}return this.data.components.indexOf(u)!=-1},remove:function(){if(this.isMine()){var u={networkId:this.data.networkId};n.connection.broadcastData("r",u)}},hasChildSchema:function(u){var t=this.data.components;for(var e in t){var n=t[e];if(this.childSchemaEqual(n,u))return!0}return!1},childSchemaToKey:function(u){return u.selector+n.utils.delimiter+u.component},keyToChildSchema:function(u){var t=u.split(n.utils.delimiter);return{selector:t[0],component:t[1]}},isChildSchemaKey:function(u){return u.indexOf(n.utils.delimiter)!=-1},childSchemaEqual:function(u,t){return u.selector==t.selector&&u.component==t.component}})},function(u,t){"use strict";AFRAME.registerComponent("show-child",{schema:{type:"int",default:0},update:function(){this.show(this.data)},show:function(u){u<this.el.children.length?(this.hideAll(),this.el.children[u].setAttribute("visible",!0)):console.error("show-child@show: invalid index: ",u)},hideAll:function(){for(var u=this.el,t=0;t<u.children.length;t++)u.children[t].setAttribute("visible",!1)}})},function(u,t,e){"use strict";function n(u,t){if(!(u instanceof t))throw new TypeError("Cannot call a class as a function")}function o(u,t){if(!u)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?u:t}function r(u,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);u.prototype=Object.create(t&&t.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(u,t):u.__proto__=t)}var i=function(){function u(u,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(u,n.key,n)}}return function(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}}(),D=e(3),s=e(11),a=function(u){function t(u,e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.easyrtc=u,r.easyrtc.setSocketUrl(e),r}return r(t,u),i(t,[{key:"joinRoom",value:function(u){this.easyrtc.joinRoom(u,null)}},{key:"setRoomOccupantListener",value:function(u){this.easyrtc.setRoomOccupantListener(u)}},{key:"setStreamOptions",value:function(u){this.easyrtc.enableDataChannels(u.datachannel),this.easyrtc.enableVideo(!1),this.easyrtc.enableAudio(u.audio),this.easyrtc.enableVideoReceive(!1),this.easyrtc.enableAudioReceive(u.audio)}},{key:"setDatachannelListeners",value:function(u,t,e){this.easyrtc.setDataChannelOpenListener(u),this.easyrtc.setDataChannelCloseListener(t),this.easyrtc.setPeerListener(e)}},{key:"setLoginListeners",value:function(u,t){this.loginSuccess=u,this.loginFailure=t}},{key:"connect",value:function(u){this.easyrtc.audioEnabled?this.connectWithAudio(u):this.easyrtc.connect(u,this.loginSuccess,this.loginFailure)}},{key:"connectWithAudio",value:function(u){var t=this;this.easyrtc.setStreamAcceptor(function(u,e){var n=document.createElement("audio");n.setAttribute("id","audio-"+u),document.body.appendChild(n),t.easyrtc.setVideoObjectSrc(n,e)}),this.easyrtc.setOnStreamClosed(function(u){var t=document.getElementById("audio-"+u);t.parentNode.removeChild(t)}),this.easyrtc.initMediaSource(function(){t.easyrtc.connect(u,t.loginSuccess,t.loginFailure)},function(u,t){console.error(u,t)})}},{key:"startStreamConnection",value:function(u){this.easyrtc.call(u,function(u,t){"datachannel"===t&&D.log.write("Successfully started datachannel to ",u)},function(u,t){console.error(u,t)},function(u){})}},{key:"sendDataP2P",value:function(u,t,e){this.easyrtc.sendDataP2P(u,t,e)}},{key:"sendDataGuaranteed",value:function(u,t,e){this.easyrtc.sendDataWS(u,t,e)}},{key:"getRoomJoinTime",value:function(u){var t=D.room,e=easyrtc.getRoomOccupantsAsMap(t)[u].roomJoinTime;return e}},{key:"getConnectStatus",value:function(u){var t=this.easyrtc.getConnectStatus(u);return t==this.easyrtc.IS_CONNECTED?s.IS_CONNECTED:t==this.easyrtc.NOT_CONNECTED?s.NOT_CONNECTED:s.CONNECTING}}]),t}(s);u.exports=a}]);